name: Test with next

on:
  schedule:
    - cron:  '* 0 * * *'
  pull_request:
    branches: [master]

jobs:
  lint-with-next:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v1
    - uses: actions/setup-node@v1
      with:
        node-version: 14
    - name: Install Packages
      run: npm install
    - name: Lint
      run: npm run lint
  test-with-next:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v1
    - uses: actions/setup-node@v1
    - name: Install Target Packages
      run: |+
        npm i -D eslint@next
        npm i -S parse5@latest
        npx rimraf node_modules
        npm install
    - name: Test
      run: npm test
